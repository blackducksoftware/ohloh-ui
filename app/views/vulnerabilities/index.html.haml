:ruby
  content_for(:html_title) { t('projects.html_title', name: @project.name, title: t('.page_title')) }
  page_context[:select_top_menu_nav] = 'select_projects'
  page_context[:select_footer_nav] = :project_security

%div
  = project_analysis_timestamp(@project)

.col-md-10.col-md-offset-2
  .row
    .col-md-12
      .row
        %h2.pull-left{ style: 'margin-left: 68px' }= t('.security')
      .row
        %h3.pull-left{ style: 'font-weight: normal; margin-left: 68px' }= t('.vulns_per_version')
  .row
    - if @project.best_project_security_set
      .col-md-8
        .pull-left
          %h3.margin_left_35{ style: 'font-weight: normal' }= t('.major_versions')
        .pull-left
          - release_data = map_vulnerabilities_to_releases(@releases)
          - select_opts = options_for_select(major_releases(@releases))
          - html_release_opts = { include_blank: 'All',
                          style: 'max-width: 30%; margin-top: 14px; margin-left: 10px',
                          data: { releases: release_data } }
          = select_tag 'release_version', select_opts, html_release_opts
        .pull-right.btn-toolbar{ 'aria-label' => '...', :role => 'group', style: 'margin-top: 17px' }
          .btn.btn-info.btn-mini#one{ 'date' => 1 } 1yr
          .btn.btn-info.btn-mini#three{ 'date' => 3 } 3yr
          .btn.btn-info.btn-mini#five{ 'date' => 5 } 5yr
          .btn.btn-info.btn-mini#ten{ 'date' => 10 } 10yr
          .btn.btn-info.btn-mini#all{ 'date' => 'all' } all
      .col-md-8
        - chart_url = all_vulnerabilities_version_chart_project_url(@project)
        .col-xs-3.col-xs-offset-9
          .h6= t('.click_and_zoom')
        .watermark440#vulnerability_version_chart{ data: { src: chart_url } }
    - else
      %p.text-center= t('.no_data')
  .clear

  .row
  .col-md-12
    &nbsp;
  .row
  .col-md-8
    - if @vulnerabilites
      %table.table.table-striped#table
        %thead
          %tr
            %th.col-md-1= t('.cve_id')
            %th.col-md-1= t('.severity')
            %th.col-md-1= t('.date_published')
            %th.col-md-3= t('.description')
            %th.col-md-3= t('.versions_affected')
        %tbody
          - @vulnerabilites.each do |vulnerability|
            %tr
              %td= vulnerability.cve_id
              %td= vulnerability.severity.titleize
              %td= vulnerability.published_on.to_s(:mdy)
              %td Sample Text.....
              %td
                .versions_affected= vulnerability.recent_releases
      .text-center
        = will_paginate @vulnerabilites
    - else
      .no_vulnerability= t('.no_vulnerability')

  .col-md-1
    &nbsp;
