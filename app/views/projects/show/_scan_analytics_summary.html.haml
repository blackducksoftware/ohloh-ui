:ruby
  scan_data = JSON.parse(scan_analytics.data, object_class: OpenStruct)
  metrics = scan_data.analysis_metrics
.scan_data_wrapper
  .row.project_row
    .col-md-12.scan_data_title
      %h4.scan_data_title
        = link_to 'Static Analysis', project_scan_analytics_path(@project, code_set_id: scan_analytics.code_set_id)
        %span ( Generated by Coverity Scan for 
        = link_to scan_data.project, scan_data.project_url, target: '_blank'
        %span )
      %h5.scan_data_title
        %span Repository URL: 
        - url = scan_analytics.code_set.code_location.url
        = url =~ /^http/ ? link_to(url, url, target: '_blank') : url
    .clearfix
  .row.project_row
    .col-md-6
      %h4.title Version: #{metrics.version.presence}
      .box
        %dl.kpi
          %dd.snapshot-date
            %em= metrics.build_date
          %dt Last Analyzed
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(metrics.loc)  || 'N/A'
          %dt Lines of Code Analyze
      .box
        %dl.kpi
          %dd
            %em= metrics.defect_density&.score.to_f || 'N/A'
          %dt Defect Density
      .clearfix
      %h4.title Defects by status for current build
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(metrics.total_count) || '0'
          %dt Total defects
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(metrics.outstanding_count) || '0'
          %dt Outstanding
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(metrics.fixed_count) || '-'
          %dt Fixed
    .col-md-6
      .clearfix
      = render partial: 'projects/show/cwe', locals: { cwes: scan_data.cwe }
 
