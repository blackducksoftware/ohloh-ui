:ruby
  scan_data = JSON.parse(scan_analytics.data, object_class: OpenStruct)
  version = scan_data.analysis_metrics.version.presence
  last_analysed = scan_data.analysis_metrics.build_date
  loc = scan_data.analysis_metrics.loc
  defect_density = scan_data.analysis_metrics.defect_density&.score
  total_defects = scan_data.analysis_metrics.total_count
  outstanding_count = scan_data.analysis_metrics.outstanding_count
  fixed_count = scan_data.analysis_metrics.fixed_count
.scan_data_wrapper
  .row.project_row
    .col-md-12.scan_data_title
      %h4.scan_data_title
        = link_to 'Static Analysis', project_scan_analytics_path(@project, code_set_id: scan_analytics.code_set_id)
        %span ( Generated by Coverity Scan for 
        = link_to scan_data.project, scan_data.project_url, target: '_blank'
        %span )
    .clearfix
  .row.project_row
    .col-md-6
      %h4.title Version: #{version}
      .box
        %dl.kpi
          %dd.snapshot-date
            %em= last_analysed
          %dt Last Analyzed
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(loc)  || 'N/A'
          %dt Lines of Code Analyze
      .box
        %dl.kpi
          %dd
            %em= defect_density.to_f || 'N/A'
          %dt Defect Density
      .clearfix
      %h4.title Defects by status for current build
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(total_defects) || '0'
          %dt Total defects
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(outstanding_count) || '0'
          %dt Outstanding
      .box
        %dl.kpi
          %dd
            %em= number_with_delimiter(fixed_count) || '-'
          %dt Fixed
    .col-md-6
      .clearfix
      = render partial: 'projects/show/cwe', locals: { cwes: scan_data.cwe }
 
