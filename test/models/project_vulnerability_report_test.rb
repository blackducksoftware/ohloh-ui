# frozen_string_literal: true

require 'test_helper'
class ProjectVulnerabilityReportTest < ActiveSupport::TestCase
  it 'should return the max rank' do
    create(:project_vulnerability_report)
    ProjectVulnerabilityReport.max_rank.must_equal 1
    create(:project_vulnerability_report, vulnerability_score: 2004)
    ProjectVulnerabilityReport.max_rank.must_equal 2
  end

  it 'should return the max score' do
    pvr = create(:project_vulnerability_report)
    ProjectVulnerabilityReport.max_score.must_equal pvr.vulnerability_score.to_f
    create(:project_vulnerability_report, vulnerability_score: 2004)
    ProjectVulnerabilityReport.max_score.must_equal 2004
  end

  it 'should get the current rank of a project' do
    pvr = create(:project_vulnerability_report)
    pvr.current_rank.must_equal 1
  end
end
